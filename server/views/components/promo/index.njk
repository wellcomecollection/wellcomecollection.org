{#TODO full width variant#}
{#TODO full width/dark background variant#}
{#TODO Test with screen reader#}
{#TODO jsConfig#}
{#TODO className unitlity for promo classes#}
<a href="{{ url }}" class="promo  {% if meta.type === 'gallery' or meta.type === 'podcast' or meta.type === 'video' %}promo--{{meta.type}}{% endif %} {% for modifier in modifiers %}promo--{{ modifier }} {% endfor %} ">
  <div class="promo__image-container">
    <img class="promo__image"
      src="{{ image.sources[(image.sources | length) - 1].src }}"
        srcset="{%- for source in image.sources %}
          {{ source.src }} {{ source.size }}w
          {%- if (source !== (image.sources | last)) %}, {%- endif %}
        {%- endfor %}"
        alt="" />

    {% for modifier in modifiers %}
      {% if modifier === 'series' %}
        <svg class="promo__defs">{# TODO proper filter - see Tomi; and only want this on the page once, where's best to move?#}
          <defs>
            <filter id="duotone" color-interpolation-filters="sRGB" x="0" y="0" height="100%" width="100%">
              <feColorMatrix type="matrix"
                values="0.90 0 0 0   0.40 
                        0.95 0 0 0  -0.10  
                      -0.20 0 0 0   0.65 
                          0  0 0 1   0" />
            </filter>
          </defs>
        </svg>
        <img class="promo__image-mask promo__clip-path--{{ [1,2,3,4,5,6,7,8,9,10] | random }}" src="{{image.sources[(image.sources | length) - 1].src}}" alt="" />
      {% endif %}
    {% endfor %}

    {% if meta.type === 'gallery' or meta.type === 'podcast' or meta.type === 'video' %}
      <div class="promo__icon-container">
        {% if meta.type === 'gallery' %}
          {% icon 'actions/gallery-link' %}
        {% elif meta.type === 'podcast' %}
          {% icon 'actions/volume'  %}
        {% elif meta.type === 'video' %}
            {% icon 'actions/play' %}
        {% endif %}
        {% if meta.type === 'gallery' and meta.length %}
          <span class="promo__length"><span class="promo__sr">Gallery with</span> {{ meta.length }} <span class="promo__sr">item{{ 's' if meta.length > 1 }}</span></span>
        {% endif %}
        {% if meta.type === 'podcast' or meta.type === 'video' and meta.length %}
          <span class="promo__sr">{% if meta.type === 'podcast' %}Podcast{%else%}Video{% endif %} lasting</span>
          {{ meta.length }}
        {% endif %}
      </div>
    {% endif %}
  </div>
  <header class="promo__description">
    {% if meta.type %}
      <span class="promo__type" aria-hidden="true">{{ meta.type }}</span>
    {% endif %}
    {% if headingLevel %}
      <{{ headingLevel }} {% else %}<h2 {% endif %} class="promo__title">
        {{ title }}
    {% if headingLevel %}</{{ headingLevel }}>{% else %}</h2>{% endif %} 
    {% if meta.date %}
      <span class="promo__date">{{ meta.date }}</span>
    {% endif %}
    {% if copy %}
      <span  class="promo__copy">{{ copy }}</span>
    {% endif %}
  </header>
</a>
